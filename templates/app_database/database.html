{# templates/app_database/database.html #}
{% extends "base.html" %}
{% load static %}

{# Blocco per caricare fogli di stile CSS e librerie esterne #}
{% block extra_head %}
  <link rel="stylesheet" href="{% static 'app_database/database.css' %}">
  <link rel="stylesheet" href="{% static 'app_nav/style.css' %}">
  <link rel="icon" href="{% static 'immagini/Icon.ico' %}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/flat-icons/css/flat-icons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" />
{% endblock %}

{# Titolo della pagina mostrato nel tag <title> del browser #}
{% block title %}CodeCrafters – Visualizza Database{% endblock %}

{% block content %}
  {# Inclusione dell’header e della navbar comuni a tutto il sito #}
  {% include 'nav_header_footer/header.html' %}
  {% include 'nav_header_footer/navbar.html' %}

  <div class="right-content">
    
    {# Sezione con le tab per scegliere la tabella del database da visualizzare #}
    <section id="filtro" class="search-section">
      <div class="centralbar">
        <div class="db-tabs">
          <div class="db-tab active" data-table="Biglietto">Biglietto</div>
          <div class="db-tab" data-table="Film">Film</div>
          <div class="db-tab" data-table="Proiezione">Proiezione</div>
          <div class="db-tab" data-table="Sala">Sala</div>
          <div class="db-tab" data-table="Utente">Utente</div>
        </div>
      </div>
    </section>

    <div class="content">

      {# Se l'utente è un amministratore, mostra le tabelle del database #}
      {% if is_admin %}
        <div class="db-table-container" id="tab-Biglietto" style="display:none;">
          <h2 class="db-title">Tabella Biglietto</h2>
        </div>
        <div class="db-table-container" id="tab-Film" style="display:none;">
          <h2 class="db-title">Tabella Film</h2>
        </div>
        <div class="db-table-container" id="tab-Proiezione" style="display:none;">
          <h2 class="db-title">Tabella Proiezione</h2>
        </div>
        <div class="db-table-container" id="tab-Sala" style="display:none;">
          <h2 class="db-title">Tabella Sala</h2>
        </div>
        <div class="db-table-container" id="tab-Utente" style="display:none;">
          <h2 class="db-title">Tabella Utente</h2>
        </div>
      {% else %}
        {# Messaggio di accesso negato se l’utente non è admin #}
        <div class="db-denied">
          <h2>Accesso negato</h2>
          <p>Solo l'amministratore può visualizzare questi dati.</p>
        </div>
      {% endif %}
    </div>
  </div>

  {# Inclusione del footer comune a tutte le pagine #}
  {% include 'nav_header_footer/footer.html' %}
{% endblock %}

{# Blocco per l'inclusione di script JavaScript esterni e personalizzati #}
{% block extra_js %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/it.js"></script>
  <script defer src="{% static 'app_database/database.js' %}"></script>
  <script defer src="{% static 'app_nav/nav.js' %}"></script>
  <script defer src="{% static 'app_nav/footer.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock %}
