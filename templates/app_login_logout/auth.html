{# templates/app_login_logout/auth.html #}
{% extends 'base.html' %}
{% load static %}

{# ===================== TITOLO DELLA PAGINA ===================== #}
{% block title %}
  CodeCrafters - Login / Signup
{% endblock %}

{# ===================== INCLUSIONE FILE CSS E ICONE ===================== #}
{% block extra_head %}
  <link rel="icon" href="{% static 'utils/Icon.ico' %}" type="image/x-icon" />
  <link rel="stylesheet" href="{% static 'app_login_logout/login.css' %}" />
  <link rel="stylesheet" href="{% static 'app_nav/style.css' %}" />
  <link rel="icon" href="{% static 'immagini/Icon.ico' %}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/flat-icons/css/flat-icons.min.css" rel="stylesheet" />
{% endblock %}

{# ===================== CONTENUTO DELLA PAGINA ===================== #}
{% block content %}
  {# Link per tornare alla home #}
  <a href="{% url 'app_index:index' %}" class="back-arrow slide-in-left"><i class="fas fa-arrow-left"></i> Back</a>

  <div class="auth-container">
    
    {# Toggle per passare tra Login e Signup (gestito via JS) #}
    <div class="toggle">
      <button id="logBtn" class="active">Log In</button>
      <button id="signBtn">Sign Up</button>
    </div>

    {# ===================== FORM LOGIN ===================== #}
    <form id="loginForm" class="active" method="post" action="{% url 'app_login_logout:login' %}">
      {% csrf_token %}
      {# Campo email #}
      <div class="form-group">
        <span><i class="fas fa-envelope"></i></span>
        <input type="email" name="email" placeholder="Email" required />
      </div>

      {# Campo password con pulsante mostra/nascondi #}
      <div class="form-group">
        <span><i class="fas fa-lock"></i></span>
        <input type="password" name="password" placeholder="Password" required />
        <button type="button" class="show-password-btn" aria-label="Show password">
          <i class="fas fa-eye"></i>
          <i class="fas fa-eye-slash" style="display: none;"></i>
        </button>
      </div>

      {# Link per recupero password o assistenza #}
      <div class="options">
        <a href="#" id="forgotPasswordLink"><i class="fas fa-key"></i> Forgot password?</a>
        <a href="javascript:void(0)"><i class="fas fa-question-circle"></i> Need help?</a>
      </div>

      {# Pulsante di invio login #}
      <button type="submit" class="submit-btn"><i class="fas fa-sign-in-alt"></i> LOGIN</button>

      {# Login con social network #}
      <div class="social-login">
        <span>Or login with</span>
      </div>

      <div class="social-buttons">
        <button type="button" class="facebook-btn"><i class="fab fa-facebook-f"></i></button>
        <button type="button" class="google-btn"><i class="fab fa-google"></i></button>
        <button type="button" class="apple-btn"><i class="fab fa-apple"></i></button>
      </div>

      {# Link per passare al form di registrazione #}
      <div class="footer">
        Don't have an account? <a href="#signup" id="switchToSignup"><i class="fas fa-user-plus"></i> Sign Up</a>
      </div>
    </form>

    {# ===================== FORM SIGNUP ===================== #}
    <form id="signupForm" method="post" action="{% url 'app_login_logout:signup' %}">
      {% csrf_token %}
      {# Campo nome utente #}
      <div class="form-group">
        <span><i class="fas fa-user"></i></span>
        <input type="text" name="name" placeholder="Name" required />
      </div>

      {# Campo email #}
      <div class="form-group">
        <span><i class="fas fa-envelope"></i></span>
        <input type="email" name="email" placeholder="Email" required />
      </div>

      {# Campo password con toggle visibilità #}
      <div class="form-group">
        <span><i class="fas fa-lock"></i></span>
        <input type="password" name="password" placeholder="Password" required />
        <button type="button" class="show-password-btn" aria-label="Show password">
          <i class="fas fa-eye"></i>
          <i class="fas fa-eye-slash" style="display: none;"></i>
        </button>
      </div>

      {# Conferma password con toggle visibilità #}
      <div class="form-group">
        <span><i class="fas fa-lock"></i></span>
        <input type="password" name="confirm_password" placeholder="Confirm Password" required />
        <button type="button" class="show-password-btn" aria-label="Show password">
          <i class="fas fa-eye"></i>
          <i class="fas fa-eye-slash" style="display: none;"></i>
        </button>
      </div>

      {# Pulsante invio registrazione #}
      <button type="submit" class="submit-btn"><i class="fas fa-user-edit"></i> REGISTER</button>

      {# Signup con social network #}
      <div class="social-login">
        <span>Or sign up with</span>
      </div>

      <div class="social-buttons">
        <button type="button" class="facebook-btn"><i class="fab fa-facebook-f"></i></button>
        <button type="button" class="google-btn"><i class="fab fa-google"></i></button>
        <button type="button" class="apple-btn"><i class="fab fa-apple"></i></button>
      </div>

      {# Link per tornare al form di login #}
      <div class="footer">
        Already have an account? <a href="#login" id="switchToLogin"><i class="fas fa-sign-in-alt"></i> Log In</a>
      </div>
    </form>
  </div>
{% endblock %}

{# ===================== INCLUSIONE SCRIPT JS ===================== #}
{% block extra_js %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/it.js"></script>
  <script src="{% static 'app_login_logout/login.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock %}
